{"version":3,"file":"csk.js","sources":["../src/preferences/csk/setkey.ts","../src/preferences/csk/page.tsx","../src/preferences/hashchange.ts","../src/preferences/csk/index.tsx","../src/preferences/csk/category.tsx","../src/preferences/index.ts"],"sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\r\n\r\nimport { createEffect, createSignal } from \"solid-js\";\r\nimport {\r\n  type CSKCommands,\r\n  type CSKData,\r\n  zCSKData,\r\n} from \"../../components/custom-shortcut-key/defines\";\r\nimport type { commands } from \"../../components/custom-shortcut-key/commands\";\r\nimport { checkIsSystemShortcut } from \"../../components/custom-shortcut-key/utils\";\r\nimport { create } from \"sortablejs\";\r\n\r\nexport const [editingStatus, setEditingStatus] = createSignal<string | null>(\r\n  null,\r\n);\r\nexport const [currentFocus, setCurrentFocus] = createSignal<\r\n  keyof typeof commands | null\r\n>(null);\r\nexport const [focusElement, setFocusElement] = createSignal<HTMLElement | null>(null);\r\n\r\ncreateEffect(() => {\r\n  //console.log(currentFocus() !== null);\r\n  Services.obs.notifyObservers(\r\n    {},\r\n    \"nora-csk\",\r\n    JSON.stringify({\r\n      type: \"disable-csk\",\r\n      data: currentFocus() !== null,\r\n    } as CSKCommands),\r\n  );\r\n});\r\n\r\nexport const [cskData, setCSKData] = createSignal(\r\n  //TODO: safely catch\r\n  zCSKData.parse(\r\n    JSON.parse(\r\n      Services.prefs.getStringPref(\"floorp.browser.nora.csk.data\", \"{}\"),\r\n    ),\r\n  ),\r\n);\r\n\r\nexport function cskDatumToString(data: CSKData, key: keyof CSKData) {\r\n  //TODO: Meta key\r\n  if (key in data) {\r\n    const datum = data[key];\r\n    return `${datum?.modifiers.ctrl ? \"Ctrl + \" : \"\"}${\r\n      datum?.modifiers.alt ? \"Alt + \" : \"\"\r\n    }${datum?.modifiers.shift ? \"Shift + \" : \"\"}${datum?.key}`;\r\n  }\r\n  return \"\";\r\n}\r\n\r\ncreateEffect(() => {\r\n  Services.prefs.setStringPref(\r\n    \"floorp.browser.nora.csk.data\",\r\n    JSON.stringify(cskData()),\r\n  );\r\n  Services.obs.notifyObservers(\r\n    {},\r\n    \"nora-csk\",\r\n    JSON.stringify({\r\n      type: \"update-pref\",\r\n    } as CSKCommands),\r\n  );\r\n});\r\n\r\nexport function initSetKey() {\r\n  document.addEventListener(\"keydown\", (ev) => {\r\n    const key = ev.key;\r\n    const alt = ev.altKey;\r\n    const ctrl = ev.ctrlKey;\r\n    const shift = ev.shiftKey;\r\n    const meta = ev.metaKey;\r\n\r\n    // If shift is pressed without any other modifier, it's a system shortcut\r\n    if (shift && !alt && !ctrl && !meta) {\r\n      return;\r\n    }\r\n\r\n    if (key === \"Escape\" || key === \"Tab\") {\r\n      return;\r\n    }\r\n\r\n    const focus = currentFocus();\r\n\r\n    if (!(alt || ctrl || shift || meta)) {\r\n      if (key === \"Delete\" || key === \"Backspace\") {\r\n        if (focus) {\r\n          ev.preventDefault();\r\n          const temp = cskData();\r\n          for (const key of Object.keys(temp)) {\r\n            if (key === focus) {\r\n              delete temp[key];\r\n              setCSKData(zCSKData.parse(temp));\r\n              setEditingStatus(cskDatumToString(cskData(), focus));\r\n              break;\r\n            }\r\n          }\r\n          //console.log(cskData());\r\n        }\r\n        return;\r\n      }\r\n    }\r\n\r\n    // on register\r\n\r\n    if (focus) {\r\n      ev.preventDefault();\r\n      if (\r\n        [\"Control\", \"Alt\", \"Meta\", \"Shift\"].filter((k) => key.includes(k))\r\n          .length === 0\r\n      ) {\r\n        if (checkIsSystemShortcut(ev)) {\r\n          console.warn(`This Event is registered in System: ${ev}`);\r\n          // Show error message to Element\r\n          focusElement()?.classList.add(\"csk-error\");\r\n          return;\r\n        }\r\n\r\n        if (shift&&!(alt||ctrl||meta)&&key){console.warn(\"Shift + [key] is not permitted\");return;}\r\n        setCSKData({\r\n          ...cskData(),\r\n          [focus]: {\r\n            key: key,\r\n            modifiers: {\r\n              alt,\r\n              ctrl,\r\n              meta,\r\n              shift,\r\n            },\r\n          },\r\n        });\r\n        setEditingStatus(cskDatumToString(cskData(), focus));\r\n      }\r\n    }\r\n  });\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\r\n\r\nimport { For } from \"solid-js\";\r\nimport {\r\n  cskData,\r\n  cskDatumToString,\r\n  currentFocus,\r\n  editingStatus,\r\n  focusElement,\r\n  setCurrentFocus,\r\n  setEditingStatus,\r\n  setFocusElement,\r\n} from \"./setkey\";\r\nimport {\r\n  commands,\r\n  csk_category,\r\n} from \"../../components/custom-shortcut-key/commands\";\r\n\r\nexport const CustomShortcutKeyPage = () => {\r\n  return (\r\n    <>\r\n      <div>\r\n        <h1 data-l10n-id=\"floorp-CSK-title\" />\r\n        <xul:description\r\n          class=\"indent tip-caption needreboot\"\r\n          data-l10n-id=\"floorp-CSK-description\"\r\n        />\r\n        <xul:checkbox data-l10n-id=\"disable-fx-actions\" checked={Services.prefs.getBoolPref(\"floorp.custom.shortcutkeysAndActions.remove.fx.actions\", false)} onClick={(ev) => {\r\n          Services.prefs.setBoolPref(\"floorp.custom.shortcutkeysAndActions.remove.fx.actions\", ev.currentTarget.checked);\r\n          if (!Services.prefs.getBoolPref(\"floorp.enable.auto.restart\", false)) {\r\n            (async () => {\r\n              let userConfirm = await confirmRestartPrompt(null);\r\n              if (userConfirm == CONFIRM_RESTART_PROMPT_RESTART_NOW) {\r\n                Services.startup.quit(\r\n                  Ci.nsIAppStartup.eAttemptQuit | Ci.nsIAppStartup.eRestart\r\n                );\r\n              }\r\n            })();\r\n          } else {\r\n            window.setTimeout(function () {\r\n              Services.startup.quit(\r\n                Services.startup.eAttemptQuit | Services.startup.eRestart\r\n              );\r\n            }, 500);\r\n          }\r\n        }} />\r\n      </div>\r\n      <For each={csk_category}>\r\n        {(category) => (\r\n          <xul:vbox class=\"csks-content-box\">\r\n            <h2\r\n              data-l10n-id={\"floorp-custom-actions-\" + category}\r\n              class=\"csks-box-title\"\r\n            >\r\n              {category}\r\n            </h2>\r\n            <For each={Object.entries(commands)}>\r\n              {([key, value]) =>\r\n                value.type === category ? (\r\n                  <div class=\"csks-box-item\" style={{ display: \"flex\" }}>\r\n                    <label\r\n                      style={{ \"flex-grow\": \"1\" }}\r\n                      data-l10n-id={\r\n                        \"floorp-custom-actions-\" +\r\n                        key.replace(\"floorp-\", \"\").replace(\"gecko-\", \"\")\r\n                      }\r\n                    >\r\n                      {key}\r\n                    </label>\r\n                    <div style={{\r\n                      display: \"flex\",\r\n                      \"flex-direction\": \"column-reverse\",\r\n                      \"justify-content\": \"right\",\r\n                      \"align-content\": \"end\",\r\n                      \"align-items\": \"end\"\r\n                    }}>\r\n                      <label class=\"csks-error-message\" data-l10n-id=\"floorp-CSK-error\" />\r\n                      <input\r\n                        value={\r\n                          currentFocus() === key && editingStatus() !== null\r\n                            ? editingStatus()!\r\n                            : cskDatumToString(cskData(), key)\r\n                        }\r\n                        onFocus={(ev) => {\r\n                          if (focusElement() === ev.currentTarget) {\r\n                            return;\r\n                          }\r\n                          focusElement()?.classList.remove(\"csk-error\");\r\n                          setCurrentFocus(key);\r\n                          setFocusElement(ev.currentTarget);\r\n                        }}\r\n                        onBlur={(ev) => {\r\n                          setEditingStatus(null);\r\n                          if (currentFocus() === key) {\r\n                            setCurrentFocus(null);\r\n                          }\r\n                        }}\r\n                        readonly={true}\r\n                        placeholder=\"Type a shortcut\"\r\n                        style={{\r\n                          \"border-radius\": \"4px\",\r\n                          color: \"inherit\",\r\n                          padding: \"6px 10px\",\r\n                          \"background-color\": \"transparent !important\",\r\n                          transition: \"all .2s ease-in-out !important\",\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                ) : undefined\r\n              }\r\n            </For>\r\n          </xul:vbox>\r\n        )}\r\n      </For>\r\n    </>\r\n  );\r\n};\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\r\n\r\nimport { createSignal } from \"solid-js\";\r\n\r\nexport const [showCSK, setShowCSK] = createSignal(false);\r\n\r\nconst onHashChange = (ev: Event | null) => {\r\n  switch (location.hash) {\r\n    case \"#csk\": {\r\n      setShowCSK(true);\r\n      break;\r\n    }\r\n    default: {\r\n      setShowCSK(false);\r\n    }\r\n  }\r\n};\r\n\r\nexport function initHashChange() {\r\n  window.addEventListener(\"hashchange\", onHashChange);\r\n  onHashChange(null);\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\r\n\r\nimport type {} from \"solid-styled-jsx\";\r\nimport { CustomShortcutKeyPage } from \"./page\";\r\n\r\nimport { showCSK } from \"../hashchange\";\r\nimport { initSetKey } from \"./setkey\";\r\nimport { Show } from \"solid-js\";\r\n\r\nexport function csk() {\r\n  initSetKey();\r\n  return (\r\n    <section id=\"nora-csk-entry\">\r\n      <Show when={showCSK()}>\r\n        <CustomShortcutKeyPage />\r\n      </Show>\r\n    </section>\r\n  );\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\r\n\r\nimport type {} from \"../../solid-xul/jsx-runtime\";\r\nexport function category() {\r\n  return (\r\n    <xul:richlistitem\r\n      id=\"category-csk\"\r\n      class=\"category\"\r\n      value=\"paneCsk\"\r\n      helpTopic=\"prefs-csk\"\r\n      data-l10n-id=\"category-CSK\"\r\n      data-l10n-attrs=\"tooltiptext\"\r\n      align=\"center\"\r\n    >\r\n      <xul:image class=\"category-icon\" />\r\n      <xul:label\r\n        class=\"category-name\"\r\n        flex=\"1\"\r\n        data-l10n-id=\"category-CSK-title\"\r\n      />\r\n    </xul:richlistitem>\r\n  );\r\n}\r\n","/* This Source Code Form is subject to the terms of the Mozilla Public\r\n * License, v. 2.0. If a copy of the MPL was not distributed with this\r\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\r\n\r\nimport { insert, render } from \"../solid-xul/solid-xul\";\r\nimport { csk } from \"./csk\";\r\nimport { category } from \"./csk/category\";\r\nimport { initHashChange } from \"./hashchange\";\r\n\r\nexport default function initScripts() {\r\n  const init = () => {\r\n    insert(\r\n      document.querySelector(\"#categories\"),\r\n      category(),\r\n      document.getElementById(\"category-Downloads\"),\r\n    );\r\n    render(csk, document.querySelector(\".pane-container\"));\r\n    initHashChange();\r\n    switch (location.hash) {\r\n      case \"#csk\": {\r\n        document.getElementById(\"category-csk\")?.click();\r\n        break;\r\n      }\r\n    }\r\n  };\r\n\r\n  if (document.readyState !== \"loading\") {\r\n    init();\r\n  } else {\r\n    document.addEventListener(\"DOMContentLoaded\", init);\r\n  }\r\n}\r\n\r\ninitScripts();\r\n"],"names":["key","CustomShortcutKeyPage","_el$","_$createElement","_el$2","_el$3","_el$4","_$insertNode","ev","Services","prefs","setBoolPref","currentTarget","checked","getBoolPref","userConfirm","confirmRestartPrompt","CONFIRM_RESTART_PROMPT_RESTART_NOW","startup","quit","Ci","nsIAppStartup","eAttemptQuit","eRestart","window","setTimeout","_$p","_$setProp","_$createComponent","For","each","csk_category","children","category","_el$5","_el$6","_$insert","Object","entries","commands","value","type","_el$7","_el$8","_el$9","_el$10","_el$11","display","focusElement","classList","remove","setCurrentFocus","setFocusElement","setEditingStatus","currentFocus","color","padding","transition","_$effect","_p$","_v$","replace","_v$2","editingStatus","cskDatumToString","cskData","e","t","undefined","csk","Show","when","showCSK"],"mappings":"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"}