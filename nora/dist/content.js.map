{"version":3,"file":"content.js","sources":["../src/components/custom-shortcut-key/index.ts","../src/content/context-menu/context-menu.tsx","../src/content/context-menu/browser-context-menu.tsx","../src/content/context-menu/index.tsx","../src/content/downloadbar/downloadbar.tsx","../src/content/downloadbar/downloadbar-manager.tsx","../src/content/downloadbar/index.ts","../src/content/private-container/PrivateContainer.ts","../src/content/private-container/browser-private-container.tsx","../src/content/private-container/context-menu.tsx","../src/content/private-container/index.tsx","../src/content/browser-action/browser-action.tsx","../src/content/profile-manager/menupopup.tsx","../src/content/profile-manager/browser-profile-manager.tsx","../src/content/profile-manager/index.ts","../src/content/reverse-sidebar-position/reverse-sidebar-position.tsx","../src/content/reverse-sidebar-position/index.ts","../src/content/share-mode/browser-share-mode.tsx","../src/content/share-mode/index.tsx","../src/content/statusbar/browser-statusbar.tsx","../src/content/statusbar/context-menu.tsx","../src/content/statusbar/statusbar.tsx","../src/content/statusbar/index.tsx","../src/content/undo-closed-tab/browser-undo-closed-tab.tsx","../src/content/undo-closed-tab/index.ts","../src/content/index.ts"],"sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { commands } from \"./commands\";\nimport { zCSKCommands, zCSKData, type CSKData } from \"./defines\";\nimport { checkIsSystemShortcut } from \"./utils\";\n\nexport class CustomShortcutKey {\n  private static instance: CustomShortcutKey;\n  private static windows: Window[] = [];\n\n  //this boolean disable shortcut of csk\n  //useful for registering\n  disable_csk = false;\n  static getInstance() {\n    if (!CustomShortcutKey.instance) {\n      CustomShortcutKey.instance = new CustomShortcutKey();\n    }\n    if (!CustomShortcutKey.windows.includes(window)) {\n      CustomShortcutKey.instance.startHandleShortcut(window);\n      CustomShortcutKey.windows.push(window);\n      //console.log(\"add window\");\n    }\n    //@ts-ignore\n    Services.obs.addObserver(CustomShortcutKey.instance, \"nora-csk\");\n    return CustomShortcutKey.instance;\n  }\n\n  //@ts-ignore\n  observe(_subj, _topic, data: string) {\n    const d = zCSKCommands.safeParse(JSON.parse(data));\n    if (d.success) {\n      switch (d.data.type) {\n        case \"disable-csk\": {\n          this.disable_csk = d.data.data;\n          break;\n        }\n        case \"update-pref\": {\n          this.initCSKData();\n          //console.log(this.cskData);\n          break;\n        }\n      }\n    }\n  }\n\n  cskData: CSKData = {};\n  private constructor() {\n    this.initCSKData();\n\n    console.warn(\"CSK Init Completed\");\n  }\n\n  private getCSKData() {\n    const shouldBeRemovedKeys = [\"floorp-open-split-view-on-right\"];\n    const data = JSON.parse(\n      Services.prefs.getStringPref(\"floorp.browser.nora.csk.data\", \"{}\"),\n    );\n    for (const key of shouldBeRemovedKeys) {\n      if (data[key]) {\n        delete data[key];\n        Services.prefs.setStringPref(\n          \"floorp.browser.nora.csk.data\",\n          JSON.stringify(data),\n        );\n      }\n    }\n    return data;\n  }\n\n  private initCSKData() {\n    //TODO: safely catch\n    this.cskData = zCSKData.parse(\n      this.getCSKData(),\n    );\n  }\n  private startHandleShortcut(_window: Window) {\n    _window.addEventListener(\"keydown\", (ev) => {\n      if (this.disable_csk) {\n        //console.log(\"disable-csk\");\n        return;\n      }\n      if (\n        [\"Control\", \"Alt\", \"Meta\", \"Shift\"].filter((k) => ev.key.includes(k))\n          .length === 0\n      ) {\n        if (checkIsSystemShortcut(ev)) {\n          console.warn(`This Event is registered in System: ${ev}`);\n          return;\n        }\n\n        for (const [_key, shortcutDatum] of Object.entries(this.cskData)) {\n          const key = _key as keyof CSKData;\n          const { alt, ctrl, meta, shift } = shortcutDatum!.modifiers;\n          if (\n            ev.altKey === alt &&\n            ev.ctrlKey === ctrl &&\n            ev.metaKey === meta &&\n            ev.shiftKey === shift &&\n            ev.key === shortcutDatum!.key\n          ) {\n            commands[key].command(ev);\n          }\n        }\n      }\n    });\n  }\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nexport function ContextMenu(id: string, l10n: string, runFunction: () => void) {\n  return (\n    <xul:menuitem\n      data-l10n-id={l10n}\n      label={l10n}\n      id={id}\n      onCommand={runFunction}\n    />\n  );\n}\n","import { insert } from \"@solid-xul/solid-xul\";\nimport { ContextMenu } from \"./context-menu\";\nimport type { JSXElement } from \"solid-js\";\n\nclass gFloorpContextMenuServices {\n  initialized = false;\n  checkItems: (() => void)[] = [];\n  contextMenuObserver: MutationObserver = new MutationObserver(() => {\n    this.contextMenuObserverFunc();\n  });\n\n  get windowModalDialogElem() {\n    return document.getElementById(\"window-modal-dialog\") as XULElement;\n  }\n  get screenShotContextMenuItems() {\n    return document.getElementById(\"context-take-screenshot\") as XULElement;\n  }\n  get contentAreaContextMenu() {\n    return document.getElementById(\"contentAreaContextMenu\") as XULElement;\n  }\n  get pdfjsContextMenuSeparator() {\n    return document.getElementById(\"context-sep-pdfjs-selectall\") as XULElement;\n  }\n  get contextMenuSeparators(): NodeListOf<XULElement> {\n    return document.querySelectorAll(\"#contentAreaContextMenu > menuseparator\");\n  }\n\n  init() {\n    if (this.initialized) {\n      return;\n    }\n    this.contentAreaContextMenu.addEventListener(\"popupshowing\", () =>\n      this.onPopupShowing(),\n    );\n    this.initialized = true;\n  }\n\n  addContextBox(\n    id: string,\n    l10n: string,\n    insertElementId: string,\n    runFunction: () => void,\n    checkID: string,\n    checkedFunction: () => void,\n  ) {\n    const contextMenu = ContextMenu(id, l10n, runFunction);\n    const targetNode = document.getElementById(checkID) as XULElement;\n    const insertElement = document.getElementById(\n      insertElementId,\n    ) as XULElement;\n\n    insert(this.contentAreaContextMenu, () => contextMenu, insertElement);\n    this.contextMenuObserver.observe(targetNode, { attributes: true });\n    this.checkItems.push(checkedFunction);\n    this.contextMenuObserverFunc();\n  }\n\n  contextMenuObserverFunc() {\n    for (const checkItem of this.checkItems) {\n      checkItem();\n    }\n  }\n\n  addToolbarContentMenuPopupSet(JSXElem: JSXElement) {\n    insert(document.body, JSXElem, this.windowModalDialogElem);\n  }\n\n  onPopupShowing() {\n    if (!this.screenShotContextMenuItems.hidden) {\n      this.pdfjsContextMenuSeparator.hidden = false;\n\n      const nextSibling = this.screenShotContextMenuItems\n        .nextSibling as XULElement;\n      if (nextSibling) {\n        nextSibling.hidden = false;\n      }\n    }\n\n    (async () => {\n      for (const contextMenuSeparator of this.contextMenuSeparators) {\n        if (\n          contextMenuSeparator.nextSibling.hidden &&\n          contextMenuSeparator.previousSibling.hidden &&\n          contextMenuSeparator.id !== \"context-sep-navigation\" &&\n          contextMenuSeparator.id !== \"context-sep-pdfjs-selectall\"\n        ) {\n          contextMenuSeparator.hidden = true;\n        }\n      }\n    })();\n  }\n}\n\nexport const gFloorpContextMenu = new gFloorpContextMenuServices();\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { gFloorpContextMenu } from \"./browser-context-menu\";\n\nexport function initBrowserContextMenu() {\n  gFloorpContextMenu.init();\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport downloadbarStyle from \"./downloadbar.css?inline\";\n\nexport function DonwloadBar() {\n  return (\n    <>\n      <vbox\n        id=\"downloadsPanel\"\n        data-l10n-id=\"downloads-panel\"\n        class=\"cui-widget-panel panel-no-padding\"\n        role=\"group\"\n        type=\"arrow\"\n        orient=\"horizontal\"\n      >\n        <linkset>\n          <link rel=\"localization\" href=\"browser/downloads.ftl\" />\n        </linkset>\n\n        <xul:menupopup id=\"downloadsContextMenu\" class=\"download-state\">\n          <xul:menuitem\n            command=\"downloadsCmd_pauseResume\"\n            class=\"downloadPauseMenuItem\"\n            data-l10n-id=\"downloads-cmd-pause\"\n          />\n          <xul:menuitem\n            command=\"downloadsCmd_pauseResume\"\n            class=\"downloadResumeMenuItem\"\n            data-l10n-id=\"downloads-cmd-resume\"\n          />\n          <xul:menuitem\n            command=\"downloadsCmd_unblock\"\n            class=\"downloadUnblockMenuItem\"\n            data-l10n-id=\"downloads-cmd-unblock\"\n          />\n          <xul:menuitem\n            command=\"downloadsCmd_openInSystemViewer\"\n            class=\"downloadUseSystemDefaultMenuItem\"\n            data-l10n-id=\"downloads-cmd-use-system-default\"\n          />\n          <xul:menuitem\n            command=\"downloadsCmd_alwaysOpenInSystemViewer\"\n            type=\"checkbox\"\n            class=\"downloadAlwaysUseSystemDefaultMenuItem\"\n            data-l10n-id=\"downloads-cmd-always-use-system-default\"\n          />\n          <xul:menuitem\n            command=\"downloadsCmd_alwaysOpenSimilarFiles\"\n            type=\"checkbox\"\n            class=\"downloadAlwaysOpenSimilarFilesMenuItem\"\n            data-l10n-id=\"downloads-cmd-always-open-similar-files\"\n          />\n          <xul:menuitem\n            command=\"downloadsCmd_show\"\n            class=\"downloadShowMenuItem\"\n            data-l10n-id=\"downloads-cmd-show-menuitem-2\"\n          />\n\n          <xul:menuseparator class=\"downloadCommandsSeparator\" />\n\n          <xul:menuitem\n            command=\"downloadsCmd_openReferrer\"\n            class=\"downloadOpenReferrerMenuItem\"\n            data-l10n-id=\"downloads-cmd-go-to-download-page\"\n          />\n          <xul:menuitem\n            command=\"downloadsCmd_copyLocation\"\n            class=\"downloadCopyLocationMenuItem\"\n            data-l10n-id=\"downloads-cmd-copy-download-link\"\n          />\n\n          <xul:menuseparator />\n\n          <xul:menuitem\n            command=\"downloadsCmd_deleteFile\"\n            class=\"downloadDeleteFileMenuItem\"\n            data-l10n-id=\"downloads-cmd-delete-file\"\n          />\n          <xul:menuitem\n            command=\"cmd_delete\"\n            class=\"downloadRemoveFromHistoryMenuItem\"\n            data-l10n-id=\"downloads-cmd-remove-from-history\"\n          />\n          <xul:menuitem\n            command=\"downloadsCmd_clearList\"\n            data-l10n-id=\"downloads-cmd-clear-list\"\n          />\n          <xul:menuitem\n            command=\"downloadsCmd_clearDownloads\"\n            hidden=\"true\"\n            data-l10n-id=\"downloads-cmd-clear-downloads\"\n          />\n        </xul:menupopup>\n        <vbox\n          id=\"downloadsPanel-multiView\"\n          mainViewId=\"downloadsPanel-mainView\"\n          disablekeynav=\"true\"\n        >\n          <hbox id=\"downloadsPanel-mainView\">\n            <vbox class=\"panel-view-body-unscrollable\">\n              <div id=\"downloadsPanel-list\">\n                <xul:richlistbox\n                  id=\"downloadsListBox\"\n                  data-l10n-id=\"downloads-panel-items\"\n                  data-l10n-attrs=\"style\"\n                  context=\"downloadsContextMenu\"\n                  onmouseover=\"DownloadsView.onDownloadMouseOver(event);\"\n                  onmouseout=\"DownloadsView.onDownloadMouseOut(event);\"\n                  oncontextmenu=\"DownloadsView.onDownloadContextMenu(event);\"\n                  ondragstart=\"DownloadsView.onDownloadDragStart(event);\"\n                />\n                <description\n                  id=\"emptyDownloads\"\n                  data-l10n-id=\"downloads-panel-empty\"\n                />\n                <div id=\"downloadsPanel-button\">\n                  <xul:toolbarbutton\n                    oncommand=\"DownloadsPanel.showDownloadsHistory();\"\n                    class=\"toolbarbutton-1 subviewbutton\"\n                    data-l10n-id=\"downloads-history\"\n                    id=\"downloadIcon\"\n                  />\n                  <xul:toolbarbutton\n                    command=\"downloadsCmd_clearList\"\n                    class=\"toolbarbutton-1 subviewbutton\"\n                    id=\"closeIcon\"\n                  />\n                </div>\n              </div>\n            </vbox>\n            <vbox id=\"downloadsFooter\">\n              <stack>\n                <hbox\n                  id=\"downloadsSummary\"\n                  align=\"center\"\n                  orient=\"horizontal\"\n                  onkeydown=\"DownloadsSummary.onKeyDown(event);\"\n                  onclick=\"DownloadsSummary.onClick(event);\"\n                >\n                  <image class=\"downloadTypeIcon\" />\n                  <vbox pack=\"center\" flex=\"1\" class=\"downloadContainer\">\n                    <description id=\"downloadsSummaryDescription\" />\n                    <progress\n                      id=\"downloadsSummaryProgress\"\n                      class=\"downloadProgress\"\n                      max=\"100\"\n                    />\n                    <description id=\"downloadsSummaryDetails\" crop=\"end\" />\n                  </vbox>\n                </hbox>\n                <vbox id=\"downloadsFooterButtons\">\n                  <toolbarseparator />\n                  <button\n                    id=\"downloadsHistory\"\n                    data-l10n-id=\"downloads-history\"\n                    class=\"downloadsPanelFooterButton subviewbutton panel-subview-footer-button toolbarbutton-1\"\n                    flex=\"1\"\n                    oncommand=\"DownloadsPanel.showDownloadsHistory();\"\n                    pack=\"start\"\n                  />\n                </vbox>\n              </stack>\n            </vbox>\n          </hbox>\n        </vbox>\n      </vbox>\n      <style class=\"nora-statusbar\" jsx>\n        {downloadbarStyle}\n      </style>\n    </>\n  );\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { createEffect, createSignal } from \"solid-js\";\nimport type { } from \"solid-styled-jsx\";\nexport const [showDownloadbar, setShowDownloadbar] = createSignal(\n  Services.prefs.getBoolPref(\"floorp.browser.native.downloadbar.enabled\", false),\n);\nexport class DownloadBarManager {\n  constructor() {\n    createEffect(() => {\n      Services.prefs.setBoolPref(\"floorp.browser.native.downloadbar.enabled\", showDownloadbar());\n    });\n\n\n    //move elem to bottom of window\n    document\n      .querySelector(\"#appcontent\")\n      ?.appendChild(document.getElementById(\"downloadsPanel\")!);\n      this.observeDownloadbar();\n  }\n\n  //if we use just method, `this` will be broken\n  private observeDownloadbar() {\n    Services.prefs.addObserver(\"floorp.browser.native.downloadbar.enabled\", () =>\n      setShowDownloadbar(() => Services.prefs.getBoolPref(\"floorp.browser.native.downloadbar.enabled\")),\n    );\n  }\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { render } from \"@solid-xul/solid-xul\";\nimport { DonwloadBar } from \"./downloadbar\";\nimport { DownloadBarManager, showDownloadbar } from \"./downloadbar-manager\";\n\nexport function initDownloadbar() {\n\n  new DownloadBarManager();\n\n  console.log(showDownloadbar());\n  if (!showDownloadbar()) {\n    return;\n  }\n  document.getElementById(\"downloadsPanel\")?.remove();\n  render(\n    DonwloadBar,\n    document.getElementById(\"appcontent\"),\n  );\n  console.log(\"init download bar\");\n  window.DownloadsPanel.hidePanel = () => { return; }\n  delete window.DownloadsView.contextMenu\n  delete window.DownloadsPanel.panel\n  delete window.DownloadsPanel.richListBox\n  window.DownloadsPanel.panel = document.getElementById(\"downloadsPanel\");\n  window.DownloadsPanel.richListBox = document.getElementById(\"downloadsListBox\");\n  window.DownloadsView.contextMenu = document.getElementById(\"downloadsContextMenu\");\n  window.DownloadsPanel._initialized = false;\n  window.DownloadsPanel.initialize();\n  window.DownloadsView.onDownloadAdded_hook = window.DownloadsView.onDownloadAdded;\n  window.DownloadsView.onDownloadAdded = (download) => {\n    document.getElementById(\"downloadsListBox\").scrollLeft = 0;\n    DownloadsView.onDownloadAdded_hook(download);\n  }\n  const scrollElem = document.getElementById(\"downloadsListBox\");\n  scrollElem?.addEventListener(\"wheel\", e => {\n    if (Math.abs(e.deltaY) < Math.abs(e.deltaX)) {\n      return;\n    }\n    e.preventDefault();\n    scrollElem.scrollLeft += e.deltaY * 10;\n  });\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nconst { ContextualIdentityService } = ChromeUtils.importESModule(\n  \"resource://gre/modules/ContextualIdentityService.sys.mjs\",\n);\n\nexport const PrivateContainer = {\n  ENABLE_PRIVATE_CONTAINER_PREF: \"floorp.privateContainer.enabled\",\n  PRIVATE_CONTAINER_L10N_ID: \"floorp-private-container-name\",\n  getPrivateContainer() {\n    const currentContainers = ContextualIdentityService._identities;\n    return currentContainers.find(\n      (container: { floorpPrivateContainer: boolean }) =>\n        container.floorpPrivateContainer === true,\n    );\n  },\n\n  getPrivateContainerUserContextId() {\n    const privateContainer = this.getPrivateContainer();\n    return privateContainer ? privateContainer.userContextId : null;\n  },\n\n  removePrivateContainerData() {\n    const privateContainer = this.getPrivateContainer();\n    if (!privateContainer || !privateContainer.userContextId) {\n      return;\n    }\n\n    Services.clearData.deleteDataFromOriginAttributesPattern({\n      userContextId: privateContainer.userContextId,\n    });\n  },\n\n  async StartupCreatePrivateContainer() {\n    const l10n = new Localization([\"browser/floorp.ftl\"], true);\n    ContextualIdentityService.ensureDataReady();\n\n    if (PrivateContainer.getPrivateContainer()) {\n      return;\n    }\n\n    const userContextId = ++ContextualIdentityService._lastUserContextId;\n\n    const identity = {\n      userContextId,\n      public: true,\n      icon: \"chill\",\n      color: \"purple\",\n      name: await l10n.formatValue(\n        PrivateContainer.PRIVATE_CONTAINER_L10N_ID\n      ),\n      floorpPrivateContainer: true,\n    };\n\n    ContextualIdentityService._identities.push(identity);\n    ContextualIdentityService.saveSoon();\n    Services.obs.notifyObservers(\n      ContextualIdentityService.getIdentityObserverOutput(identity),\n      \"contextual-identity-created\",\n    );\n  },\n};\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { gFloorpContextMenu } from \"../context-menu/browser-context-menu\";\nimport { PrivateContainer } from \"./PrivateContainer\";\n\nexport class gFloorpPrivateContainer {\n  private static instance: gFloorpPrivateContainer;\n  private initialized = false;\n\n  private get privateContainerMenuItem() {\n    return document.querySelector(\"#open_in_private_container\") as XULElement;\n  }\n  private get openLinkMenuItem() {\n    return document.querySelector(\"#context-openlink\") as XULElement;\n  }\n\n  public static getInstance() {\n    if (!gFloorpPrivateContainer.instance) {\n      gFloorpPrivateContainer.instance = new gFloorpPrivateContainer();\n    }\n    return gFloorpPrivateContainer.instance;\n  }\n\n  constructor() {\n    if (this.initialized) {\n      return;\n    }\n\n    // Create a private container.\n    PrivateContainer.StartupCreatePrivateContainer();\n    PrivateContainer.removePrivateContainerData();\n\n    window.SessionStore.promiseInitialized.then(() => {\n      window.gBrowser.tabContainer.addEventListener(\n        \"TabClose\",\n        gFloorpPrivateContainer.removeDataIfPrivateContainerTabNotExist,\n      );\n\n      window.gBrowser.tabContainer.addEventListener(\n        \"TabOpen\",\n        gFloorpPrivateContainer.handleTabModifications,\n      );\n\n      document.addEventListener(\n        \"floorpOnLocationChangeEvent\",\n        gFloorpPrivateContainer.handleTabModifications,\n      );\n\n      // add URL link a context menu to open in private container.\n      gFloorpContextMenu.addContextBox(\n        \"open_in_private_container\",\n        \"open-in_private-container\",\n        \"context-openlink\",\n        () =>\n          gFloorpPrivateContainer.openWithPrivateContainer(\n            window.gContextMenu.linkURL,\n          ),\n        \"context-openlink\",\n        () => {\n          this.privateContainerMenuItem.hidden = this.openLinkMenuItem.hidden;\n        },\n      );\n    });\n\n    this.initialized = true;\n  }\n\n  public getPrivateContainerUserContextId() {\n    return PrivateContainer.getPrivateContainerUserContextId();\n  }\n\n  public static checkPrivateContainerTabExist() {\n    const privateContainer = PrivateContainer.getPrivateContainer();\n    if (!privateContainer || !privateContainer.userContextId) {\n      return false;\n    }\n    return window.gBrowser.tabs.some(\n      (tab: { userContextId: number }) =>\n        tab.userContextId === privateContainer.userContextId,\n    );\n  }\n\n  private static removeDataIfPrivateContainerTabNotExist() {\n    const privateContainerUserContextID =\n      PrivateContainer.getPrivateContainerUserContextId();\n    setTimeout(() => {\n      if (!gFloorpPrivateContainer.checkPrivateContainerTabExist()) {\n        PrivateContainer.removePrivateContainerData();\n      }\n\n      return window.gBrowser.tabs.filter(\n        (tab: { userContextId: number }) =>\n          tab.userContextId === privateContainerUserContextID,\n      );\n    }, 400);\n  }\n\n  private static tabIsSaveHistory(tab: {\n    getAttribute: (arg0: string) => string;\n  }) {\n    return tab.getAttribute(\"historydisabled\") === \"true\";\n  }\n\n  private static applyDoNotSaveHistoryToTab(tab: {\n    linkedBrowser: { setAttribute: (arg0: string, arg1: string) => void };\n    setAttribute: (arg0: string, arg1: string) => void;\n  }) {\n    tab.linkedBrowser.setAttribute(\"disablehistory\", \"true\");\n    tab.linkedBrowser.setAttribute(\"disableglobalhistory\", \"true\");\n    tab.setAttribute(\"floorp-disablehistory\", \"true\");\n  }\n\n  private static checkTabIsPrivateContainer(tab: { userContextId: number }) {\n    const privateContainerUserContextID =\n      PrivateContainer.getPrivateContainerUserContextId();\n    return tab.userContextId === privateContainerUserContextID;\n  }\n\n  private static handleTabModifications() {\n    const tabs = window.gBrowser.tabs;\n    for (const tab of tabs) {\n      if (\n        gFloorpPrivateContainer.checkTabIsPrivateContainer(tab) &&\n        !gFloorpPrivateContainer.tabIsSaveHistory(tab)\n      ) {\n        gFloorpPrivateContainer.applyDoNotSaveHistoryToTab(tab);\n      }\n    }\n  }\n\n  public static openWithPrivateContainer(url: URI) {\n    let relatedToCurrent = false; //\"relatedToCurrent\" decide where to open the new tab. Default work as last tab (right side). Floorp use this.\n    const _OPEN_NEW_TAB_POSITION_PREF = Services.prefs.getIntPref(\n      \"floorp.browser.tabs.openNewTabPosition\",\n      -1,\n    );\n    switch (_OPEN_NEW_TAB_POSITION_PREF) {\n      case 0:\n        // Open the new tab as unrelated to the current tab.\n        relatedToCurrent = false;\n        break;\n      case 1:\n        // Open the new tab as related to the current tab.\n        relatedToCurrent = true;\n        break;\n    }\n    const privateContainerUserContextID =\n      PrivateContainer.getPrivateContainerUserContextId();\n    Services.obs.notifyObservers(\n      {\n        wrappedJSObject: new Promise((resolve) => {\n          window.openTrustedLinkIn(url, \"tab\", {\n            relatedToCurrent,\n            resolveOnNewTabCreated: resolve,\n            userContextId: privateContainerUserContextID,\n          });\n        }),\n      },\n      \"browser-open-newtab-start\",\n    );\n  }\n\n  public static reopenInPrivateContainer() {\n    let userContextId = PrivateContainer.getPrivateContainerUserContextId();\n    const reopenedTabs = window.TabContextMenu.contextTab.multiselected\n      ? window.gBrowser.selectedTabs\n      : [window.TabContextMenu.contextTab];\n\n    for (const tab of reopenedTabs) {\n      /* Create a triggering principal that is able to load the new tab\n          For content principals that are about: chrome: or resource: we need system to load them.\n          Anything other than system principal needs to have the new userContextId.\n       */\n      let triggeringPrincipal: nsIPrincipal;\n\n      if (tab.linkedPanel) {\n        triggeringPrincipal = tab.linkedBrowser.contentPrincipal;\n      } else {\n        // For lazy tab browsers, get the original principal\n        // from SessionStore\n        const tabState = JSON.parse(window.SessionStore.getTabState(tab));\n        try {\n          triggeringPrincipal = window.E10SUtils.deserializePrincipal(\n            tabState.triggeringPrincipal_base64,\n          );\n        } catch (ex) {\n          continue;\n        }\n      }\n\n      if (!triggeringPrincipal || triggeringPrincipal.isNullPrincipal) {\n        // Ensure that we have a null principal if we couldn't\n        // deserialize it (for lazy tab browsers) ...\n        // This won't always work however is safe to use.\n        triggeringPrincipal =\n          Services.scriptSecurityManager.createNullPrincipal({\n            userContextId,\n          });\n      } else if (triggeringPrincipal.isContentPrincipal) {\n        triggeringPrincipal = Services.scriptSecurityManager.principalWithOA(\n          triggeringPrincipal,\n          {\n            userContextId,\n          },\n        );\n      }\n\n      const currentTabUserContextId = Number.parseInt(\n        tab.getAttribute(\"usercontextid\"),\n      );\n\n      if (currentTabUserContextId === userContextId) {\n        userContextId = 0;\n      }\n\n      const newTab = window.gBrowser.addTab(tab.linkedBrowser.currentURI.spec, {\n        userContextId,\n        pinned: tab.pinned,\n        index: tab._tPos + 1,\n        triggeringPrincipal,\n      });\n\n      if (window.gBrowser.selectedTab === tab) {\n        window.gBrowser.selectedTab = newTab;\n      }\n      if (tab.muted && !newTab.muted) {\n        newTab.toggleMuteAudio(tab.muteReason);\n      }\n\n      window.gBrowser.removeTab(tab);\n    }\n  }\n}\n","import { gFloorpPrivateContainer } from \"./browser-private-container\";\n\nexport function ContextMenu() {\n  return (\n    <xul:menuitem\n      id=\"context_toggleToPrivateContainer\"\n      data-l10n-id=\"floorp-toggle-private-container\"\n      label=\"Toggle to Private Container\"\n      onCommand={() => {\n        gFloorpPrivateContainer.reopenInPrivateContainer();\n      }}\n    />\n  );\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { insert } from \"@solid-xul/solid-xul\";\nimport { gFloorpPrivateContainer } from \"./browser-private-container\";\nimport { ContextMenu } from \"./context-menu\";\n\nexport function initPrivateContainer() {\n  insert(\n    document.querySelector(\"#tabContextMenu\"),\n    () => <ContextMenu />,\n    document.querySelector(\"#context_selectAllTabs\"),\n  );\n  // Inject menu item to open link in private container.\n  window.gFloorpPrivateContainer = gFloorpPrivateContainer.getInstance();\n  console.log(window.gFloorpPrivateContainer)\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n// NOTICE: Do not add toolbar buttons code here. Create new folder or file for new toolbar buttons.\n\nimport { insert } from \"@solid-xul/solid-xul\";\nimport type { JSXElement } from \"solid-js\";\n\nconst { CustomizableUI } = ChromeUtils.importESModule(\n  \"resource:///modules/CustomizableUI.sys.mjs\",\n);\n\nexport const gFloorpBrowserAction = {\n  createToolbarClickActionButton(\n    widgetId: string,\n    l10nId: string,\n    onCommandFunc: () => void,\n    styleElement: JSXElement | null = null,\n    area: string = CustomizableUI.AREA_NAVBAR,\n    position: number | null = null,\n    onCreatedFunc: null | ((aNode: XULElement) => void) = null,\n  ) {\n    // Add style Element for toolbar button icon.\n    // This insert is runnning every open browser window.\n    insert(document.head, () => styleElement, document.head?.lastChild);\n\n    // Create toolbar button. If widget already exists, return.\n    // custom type is temporary widget type. It will be changed to button type.\n    const widget = CustomizableUI.getWidget(widgetId);\n    if (widget && widget.type !== \"custom\") {\n      return;\n    }\n    (async () => {\n      CustomizableUI.createWidget({\n        id: widgetId,\n        type: \"button\",\n        tooltiptext: await document.l10n?.formatValue(l10nId),\n        label: await document.l10n?.formatValue(l10nId),\n        removable: true,\n        onCommand: () => {\n          onCommandFunc?.();\n        },\n        onCreated: (aNode: XULElement) => {\n          onCreatedFunc?.(aNode);\n        },\n      });\n      if (\n        ChromeUtils.importESModule(\"resource://floorp/FloorpStartup.sys.mjs\")\n          .isFirstRun\n      ) {\n        CustomizableUI.addWidgetToArea(widgetId, area, position);\n      }\n    })();\n  },\n\n  createMenuToolbarButton(\n    widgetId: string,\n    l10nId: string,\n    popupElem: XULPopupElement,\n    onCommandFunc: () => void,\n    area: string = CustomizableUI.AREA_NAVBAR,\n    styleElement: JSXElement | null = null,\n    position: number | null = null,\n    onCreatedFunc: null | ((aNode: XULElement) => void) = null,\n  ) {\n    insert(document.head, () => styleElement, document.head?.lastChild);\n\n    const widget = CustomizableUI.getWidget(widgetId);\n    if (widget && widget.type !== \"custom\") {\n      return;\n    }\n    (async () => {\n      CustomizableUI.createWidget({\n        id: widgetId,\n        type: \"button\",\n        tooltiptext: await document.l10n?.formatValue(l10nId),\n        label: await document.l10n?.formatValue(l10nId),\n        removable: true,\n        onCommand: () => {\n          onCommandFunc?.();\n        },\n        onCreated: (aNode: XULElement) => {\n          aNode.setAttribute(\"type\", \"menu\");\n          aNode.appendChild(popupElem);\n          onCreatedFunc?.(aNode);\n        },\n      });\n      if (\n        ChromeUtils.importESModule(\"resource://floorp/FloorpStartup.sys.mjs\")\n          .isFirstRun\n      ) {\n        CustomizableUI.addWidgetToArea(widgetId, area, position);\n      }\n    })();\n  },\n};\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nexport function MenuPopup() {\n  return (\n    <xul:menupopup id=\"profile-manager-popup\">\n      <xul:browser\n        id=\"profile-switcher-browser\"\n        src=\"chrome://floorp/content/profile-manager/profile-switcher.xhtml\"\n        flex=\"1\"\n        type=\"content\"\n        disablehistory=\"true\"\n        disableglobalhistory=\"true\"\n        context=\"profile-popup-contextmenu\"\n      />\n    </xul:menupopup>\n  );\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { gFloorpBrowserAction } from \"../browser-action/browser-action\";\nimport { MenuPopup } from \"./menupopup\";\nimport profileManagerStyle from \"./profile-manager.pcss?inline\";\n\nconst { CustomizableUI } = ChromeUtils.importESModule(\n  \"resource:///modules/CustomizableUI.sys.mjs\",\n);\n\nexport class gFloorpProfileManager {\n  private static instance: gFloorpProfileManager;\n  public static getInstance() {\n    if (!gFloorpProfileManager.instance) {\n      gFloorpProfileManager.instance = new gFloorpProfileManager();\n    }\n    return gFloorpProfileManager.instance;\n  }\n\n  private StyleElement = () => {\n    return <style>{profileManagerStyle}</style>;\n  };\n\n  constructor() {\n    gFloorpBrowserAction.createMenuToolbarButton(\n      \"profile-manager\",\n      \"floorp-profile-manager\",\n      <MenuPopup />,\n      async () => {\n        const popup = document.getElementById(\n          \"profile-manager-popup\",\n        ) as XULPopupElement;\n        popup?.openPopup(\n          document.getElementById(\"profile-manager-popup\"),\n          \"after_start\",\n          0,\n          0,\n          false,\n          false,\n        );\n      },\n      CustomizableUI.AREA_NAVBAR,\n      this.StyleElement(),\n      15,\n    );\n  }\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { gFloorpProfileManager } from \"./browser-profile-manager\";\n\nexport function initProfileManager() {\n  gFloorpProfileManager.getInstance();\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { gFloorpBrowserAction } from \"../browser-action/browser-action\";\nimport iconStyle from \"./icon.pcss?inline\";\n\nconst { CustomizableUI } = ChromeUtils.importESModule(\n  \"resource:///modules/CustomizableUI.sys.mjs\",\n);\n\nexport class gReverseSidebarPosition {\n  private static instance: gReverseSidebarPosition;\n  public static getInstance() {\n    if (!gReverseSidebarPosition.instance) {\n      gReverseSidebarPosition.instance = new gReverseSidebarPosition();\n    }\n    return gReverseSidebarPosition.instance;\n  }\n  private StyleElement = () => {\n    return <style>{iconStyle}</style>;\n  };\n\n  constructor() {\n    gFloorpBrowserAction.createToolbarClickActionButton(\n      \"sidebar-reverse-position-toolbar\",\n      \"sidebar-reverse-position-toolbar\",\n      () => {\n        window.SidebarController.reversePosition();\n      },\n      this.StyleElement(),\n      CustomizableUI.AREA_NAVBAR,\n      2,\n      () => {\n        const onFirstLaunch = ChromeUtils.importESModule(\n          \"resource://floorp/FloorpStartup.sys.mjs\"\n        ).isFirstRun;\n\n        if (onFirstLaunch) {\n          // Sidebar button should right side of navbar\n          CustomizableUI.addWidgetToArea(\n            \"sidebar-button\",\n            CustomizableUI.AREA_NAVBAR,\n            3,\n          );\n        }\n      },\n    );\n  }\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { gReverseSidebarPosition } from \"./reverse-sidebar-position\";\n\nexport function initReverseSidebarPosition() {\n  gReverseSidebarPosition.getInstance();\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { createSignal } from \"solid-js\";\nimport { Show } from \"solid-js\";\nimport shareModeStyle from \"./share-mode.pcss?inline\";\n\nexport const [shareModeEnabled, setShareModeEnabled] = createSignal(false);\nexport function ShareModeElement() {\n  return (\n    <>\n      <xul:menuitem\n        data-l10n-id=\"sharemode-menuitem\"\n        label=\"Toggle Share Mode\"\n        type=\"checkbox\"\n        id=\"toggle_sharemode\"\n        checked={false}\n        onCommand={() => setShareModeEnabled((prev) => !prev)}\n        accesskey=\"S\"\n      />\n\n      <Show when={shareModeEnabled()}>\n        <style>{shareModeStyle}</style>\n      </Show>\n    </>\n  );\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { insert } from \"@solid-xul/solid-xul\";\nimport { ShareModeElement } from \"./browser-share-mode\";\n\nexport function initShareMode() {\n  insert(\n    document.querySelector(\"#menu_ToolsPopup\"),\n    () => <ShareModeElement />,\n    document.querySelector(\"#menu_openFirefoxView\"),\n  );\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { createEffect, createSignal } from \"solid-js\";\nimport type {} from \"solid-styled-jsx\";\n\nexport const [showStatusbar, setShowStatusbar] = createSignal(\n  Services.prefs.getBoolPref(\"browser.display.statusbar\", false),\n);\nexport class gFloorpStatusBar {\n  private static instance: gFloorpStatusBar;\n  public static getInstance() {\n    if (!gFloorpStatusBar.instance) {\n      gFloorpStatusBar.instance = new gFloorpStatusBar();\n    }\n    return gFloorpStatusBar.instance;\n  }\n\n  private get statusbarEnabled() {\n    return Services.prefs.getBoolPref(\"browser.display.statusbar\", false);\n  }\n\n  constructor() {\n    window.CustomizableUI.registerArea(\"statusBar\", {\n      type: window.CustomizableUI.TYPE_TOOLBAR,\n      defaultPlacements: [\"screenshot-button\", \"fullscreen-button\"],\n    });\n    window.CustomizableUI.registerToolbarNode(\n      document.getElementById(\"statusBar\"),\n    );\n\n    createEffect(() => {\n      const statuspanel_label = document.getElementById(\n        \"statuspanel-label\",\n      ) as XULElement;\n      const statuspanel = document.getElementById(\"statuspanel\") as XULElement;\n      const statusText = document.getElementById(\"status-text\") as XULElement;\n      const observer = new MutationObserver(() => {\n        if (statuspanel.getAttribute(\"inactive\") === \"true\" && statusText) {\n          statusText.setAttribute(\"hidden\", \"true\");\n        } else {\n          statusText?.removeAttribute(\"hidden\");\n        }\n      });\n\n      Services.prefs.setBoolPref(\"browser.display.statusbar\", showStatusbar());\n      if (showStatusbar()) {\n        statusText?.appendChild(statuspanel_label!);\n        observer.observe(statuspanel, { attributes: true });\n      } else {\n        statuspanel?.appendChild(statuspanel_label!);\n        observer?.disconnect();\n      }\n    });\n\n    //move elem to bottom of window\n    document.body?.appendChild(document.getElementById(\"statusBar\")!);\n    this.observeStatusbar();\n  }\n\n  private observeStatusbar() {\n    Services.prefs.addObserver(\"browser.display.statusbar\", () =>\n      setShowStatusbar(() => this.statusbarEnabled),\n    );\n  }\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { showStatusbar, setShowStatusbar } from \"./browser-statusbar\";\n\nexport function ContextMenu() {\n  return (\n    <xul:menuitem\n      data-l10n-id=\"status-bar\"\n      label=\"Status Bar\"\n      type=\"checkbox\"\n      id=\"toggle_statusBar\"\n      checked={showStatusbar()}\n      onCommand={() => setShowStatusbar((value) => !value)}\n    />\n  );\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { showStatusbar } from \"./browser-statusbar\";\nimport statusbarStyle from \"./statusbar.pcss?inline\";\n\nexport function StatusBar() {\n  return (\n    <>\n      <xul:toolbar\n        id=\"statusBar\"\n        toolbarname=\"Status bar\"\n        customizable=\"true\"\n        class={`browser-toolbar customization-target ${\n          showStatusbar() ? \"\" : \"collapsed\"\n        }`}\n        mode=\"icons\"\n        context=\"toolbar-context-menu\"\n        accesskey=\"A\"\n      >\n        <xul:hbox\n          id=\"status-text\"\n          align=\"center\"\n          flex=\"1\"\n          class=\"statusbar-padding\"\n        />\n      </xul:toolbar>\n      <style jsx>{statusbarStyle}</style>\n    </>\n  );\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { insert, render } from \"@solid-xul/solid-xul\";\nimport { gFloorpStatusBar } from \"./browser-statusbar\";\nimport { ContextMenu } from \"./context-menu\";\nimport { StatusBar } from \"./statusbar\";\n\nexport function initStatusbar() {\n  render(() => <StatusBar />, document.getElementById(\"navigator-toolbox\"));\n  insert(\n    document.getElementById(\"toolbar-context-menu\"),\n    () => <ContextMenu />,\n    document.getElementById(\"viewToolbarsMenuSeparator\"),\n  );\n\n  // Initialize statusbar\n  gFloorpStatusBar.getInstance();\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { gFloorpBrowserAction } from \"../browser-action/browser-action\";\nimport iconStyle from \"./icon.pcss?inline\";\n\nconst { CustomizableUI } = ChromeUtils.importESModule(\n  \"resource:///modules/CustomizableUI.sys.mjs\",\n);\n\nexport class gFloorpUndoClosedTab {\n  private static instance: gFloorpUndoClosedTab;\n  public static getInstance() {\n    if (!gFloorpUndoClosedTab.instance) {\n      gFloorpUndoClosedTab.instance = new gFloorpUndoClosedTab();\n    }\n    return gFloorpUndoClosedTab.instance;\n  }\n  private StyleElement = () => {\n    return <style>{iconStyle}</style>;\n  };\n\n  constructor() {\n    gFloorpBrowserAction.createToolbarClickActionButton(\n      \"undo-closed-tab\",\n      \"undo-closed-tab\",\n      () => {\n        window.undoCloseTab();\n      },\n      this.StyleElement(),\n      CustomizableUI.AREA_NAVBAR,\n      0,\n    );\n  }\n}\n","/* -*- indent-tabs-mode: nil; js-indent-level: 2 -*-\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { gFloorpUndoClosedTab } from \"./browser-undo-closed-tab\";\n\nexport function initUndoClosedTab() {\n  gFloorpUndoClosedTab.getInstance();\n}\n","/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { CustomShortcutKey } from \"../components/custom-shortcut-key\";\nimport { initBrowserContextMenu } from \"./context-menu\";\nimport { initDownloadbar } from \"./downloadbar\";\nimport { initPrivateContainer } from \"./private-container\";\nimport { initProfileManager } from \"./profile-manager\";\nimport { initReverseSidebarPosition } from \"./reverse-sidebar-position\";\nimport { initShareMode } from \"./share-mode\";\nimport { initStatusbar } from \"./statusbar\";\nimport { initUndoClosedTab } from \"./undo-closed-tab\";\nCustomShortcutKey.getInstance();\n\nwindow.SessionStore.promiseInitialized.then(() => {\n  initBrowserContextMenu();\n  initPrivateContainer();\n  initShareMode();\n  initStatusbar();\n  initDownloadbar();\n  initReverseSidebarPosition();\n  initUndoClosedTab();\n  initProfileManager();\n});\n"],"names":["ContextMenu","id","l10n","runFunction","_el$","_$createElement","gFloorpContextMenuServices","initialized","checkItems","contextMenuObserver","MutationObserver","contextMenuObserverFunc","windowModalDialogElem","document","getElementById","screenShotContextMenuItems","contentAreaContextMenu","pdfjsContextMenuSeparator","contextMenuSeparators","querySelectorAll","init","addEventListener","onPopupShowing","addContextBox","insertElementId","checkID","checkedFunction","contextMenu","targetNode","insertElement","insert","observe","attributes","push","checkItem","addToolbarContentMenuPopupSet","JSXElem","body","hidden","nextSibling","contextMenuSeparator","previousSibling","gFloorpContextMenu","initBrowserContextMenu","DonwloadBar","_el$2","_el$3","_el$4","_el$5","_el$6","_el$7","_el$8","_el$9","_el$10","_el$11","_el$12","_el$13","_el$14","_el$15","_el$16","_el$17","_el$18","_el$19","_el$20","_el$21","_el$22","_el$23","_el$24","_el$25","_el$26","_el$27","_el$28","_el$29","_el$30","_el$31","_el$32","_el$33","_el$34","_el$35","_el$36","_el$37","_el$38","_el$39","_$insertNode","_el$40","_$insert","downloadbarStyle","showDownloadbar","setShowDownloadbar","createSignal","Services","prefs","getBoolPref","DownloadBarManager","constructor","createEffect","setBoolPref","querySelector","appendChild","observeDownloadbar","addObserver","gFloorpPrivateContainer","PrivateContainer","StartupCreatePrivateContainer","removePrivateContainerData","SessionStore","promiseInitialized","then","window","gBrowser","tabContainer","removeDataIfPrivateContainerTabNotExist","handleTabModifications","openWithPrivateContainer","gContextMenu","linkURL","privateContainerMenuItem","openLinkMenuItem","getInstance","instance","getPrivateContainerUserContextId","checkPrivateContainerTabExist","privateContainer","getPrivateContainer","userContextId","tabs","some","tab","privateContainerUserContextID","setTimeout","filter","tabIsSaveHistory","getAttribute","applyDoNotSaveHistoryToTab","linkedBrowser","setAttribute","checkTabIsPrivateContainer","url","relatedToCurrent","_OPEN_NEW_TAB_POSITION_PREF","getIntPref","obs","notifyObservers","wrappedJSObject","Promise","resolve","openTrustedLinkIn","resolveOnNewTabCreated","reopenInPrivateContainer","reopenedTabs","TabContextMenu","contextTab","multiselected","selectedTabs","triggeringPrincipal","linkedPanel","contentPrincipal","tabState","JSON","parse","getTabState","E10SUtils","deserializePrincipal","triggeringPrincipal_base64","ex","isNullPrincipal","scriptSecurityManager","createNullPrincipal","isContentPrincipal","principalWithOA","currentTabUserContextId","Number","parseInt","newTab","addTab","currentURI","spec","pinned","index","_tPos","selectedTab","muted","toggleMuteAudio","muteReason","removeTab","initPrivateContainer","_$createComponent","log","CustomizableUI","ChromeUtils","importESModule","gFloorpBrowserAction","createToolbarClickActionButton","widgetId","l10nId","onCommandFunc","styleElement","area","AREA_NAVBAR","position","onCreatedFunc","head","lastChild","widget","getWidget","type","createWidget","tooltiptext","formatValue","label","removable","onCommand","onCreated","aNode","isFirstRun","addWidgetToArea","createMenuToolbarButton","popupElem","MenuPopup","gFloorpProfileManager","StyleElement","profileManagerStyle","popup","openPopup","gReverseSidebarPosition","iconStyle","SidebarController","reversePosition","onFirstLaunch","shareModeEnabled","setShareModeEnabled","ShareModeElement","_$setProp","prev","Show","when","children","shareModeStyle","initShareMode","showStatusbar","setShowStatusbar","gFloorpStatusBar","statusbarEnabled","registerArea","TYPE_TOOLBAR","defaultPlacements","registerToolbarNode","statuspanel_label","statuspanel","statusText","observer","removeAttribute","disconnect","observeStatusbar","value","_$effect","_$p","StatusBar","statusbarStyle","initStatusbar","gFloorpUndoClosedTab","undoCloseTab"],"mappings":"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"}